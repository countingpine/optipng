diff -ru libpng-1.2.8/CHANGES libpng/CHANGES
--- libpng-1.2.8/CHANGES	2004-12-02 19:14:24.000000000 -0500
+++ libpng/CHANGES	2006-01-14 12:53:00.000000000 -0500
@@ -1411,9 +1411,8 @@
 version 1.2.8 [December 3, 2004]
   Removed projects/visualc7, added projects/visualc71.
 
-Send comments/corrections/commendations to
-png-implement at ccrc.wustl.edu (subscription required; write to
-majordomo at ccrc.wustl.edu with "subscribe png-implement" in the message)
-or to glennrp at users.sourceforge.net
+version 1.2.8-optipng [Jan 14, 2006]
+  Included pngusr.h in png.h (Cosmin).
+  Removed contrib/ directory (Cosmin).
+  Added parentheses in the definition of PNG_LIBPNG_BUILD_TYPE (Cosmin).
 
-Glenn R-P
Only in libpng-1.2.8: contrib
diff -ru libpng-1.2.8/png.h libpng/png.h
--- libpng-1.2.8/png.h	2004-12-02 19:14:24.000000000 -0500
+++ libpng/png.h	2006-01-14 12:53:00.000000000 -0500
@@ -1,3 +1,6 @@
+/* MODIFIED version of libpng-1.2.8 by Cosmin Truta */
+#include "pngusr.h"
+
 /* png.h - header file for PNG reference library
  *
  * libpng version 1.2.8 - December 3, 2004
@@ -314,9 +317,9 @@
  */
 
 /* Version information for png.h - this should match the version in png.c */
-#define PNG_LIBPNG_VER_STRING "1.2.8"
+#define PNG_LIBPNG_VER_STRING "1.2.8-optipng"
 #define PNG_HEADER_VERSION_STRING \
-   " libpng version 1.2.8 - December 3, 2004 (header)\n"
+   " libpng version 1.2.8-optipng (header)\n"
 
 #define PNG_LIBPNG_VER_SONUM   0
 #define PNG_LIBPNG_VER_DLLNUM  13
@@ -376,14 +379,14 @@
  */
 
 #if defined(PNG_USER_PRIVATEBUILD)
-#  define PNG_LIBPNG_BUILD_TYPE PNG_LIBPNG_BUILD_BASE_TYPE | \
-          PNG_LIBPNG_BUILD_PRIVATE
+#  define PNG_LIBPNG_BUILD_TYPE \
+          (PNG_LIBPNG_BUILD_BASE_TYPE | PNG_LIBPNG_BUILD_PRIVATE)
 #else
 #  if defined(PNG_LIBPNG_SPECIALBUILD)
-#    define PNG_LIBPNG_BUILD_TYPE PNG_LIBPNG_BUILD_BASE_TYPE | \
-            PNG_LIBPNG_BUILD_SPECIAL
+#    define PNG_LIBPNG_BUILD_TYPE \
+            (PNG_LIBPNG_BUILD_BASE_TYPE | PNG_LIBPNG_BUILD_SPECIAL)
 #  else
-#    define PNG_LIBPNG_BUILD_TYPE PNG_LIBPNG_BUILD_BASE_TYPE
+#    define PNG_LIBPNG_BUILD_TYPE (PNG_LIBPNG_BUILD_BASE_TYPE)
 #  endif
 #endif
 
Only in libpng: pngusr.h
